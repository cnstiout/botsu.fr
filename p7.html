<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Dream Game - Prototype</title>
</head>
<body>
  <h1>Dream Game - projet 7</h1>

  <h2>Horloge décimale</h2>
  <p id="decimalClock">Chargement...</p>

  <h2>Date du calendrier républicain</h2>
  <p id="republicanDate">Chargement...</p>

  <h2>Statistiques du personnage</h2>
  <ul>
    <li>🧠 Psychique : <span id="psychiqueStat">80</span>%</li>
    <li>💪 Physique : <span id="physiqueStat">70</span>%</li>
    <li>🔋 Volonté : <span id="volonteStat">100</span>%</li>
  </ul>

<h2>Actions disponibles</h2>

<button onclick="faireThe()">🍵 Faire un thé (−10 Physique)</button><br>
<button onclick="faireAction()">🪄 Faire une action (−10 Volonté)</button><br>
<button onclick="manger()">🍽️ Manger (−10 Psychique)</button><br>
<button onclick="lire()">📖 Lire un livre (+10 Psychique)</button><br>
<button onclick="mediter()">🧘 Méditer (+10 Volonté)</button><br>
<button onclick="marcher()">🚶 Marcher (−10 Volonté, +5 Physique)</button><br>
<button onclick="ecrire()">✍️ Écrire (−5 Volonté, −5 Psychique, effet différé)</button><br>
<button onclick="dormir()">💤 Dormir (+20 partout)</button><br>

<script>
  // Extraits du script précédent
  function faireThe() {
    stats.physique = Math.max(0, stats.physique - 10);
    updateStats();
  }

  function faireAction() {
    stats.volonte = Math.max(0, stats.volonte - 10);
    updateStats();
  }

  function manger() {
    stats.psychique = Math.max(0, stats.psychique - 10);
    updateStats();
  }

  function lire() {
    stats.psychique = Math.min(100, stats.psychique + 10);
    updateStats();
  }

  function mediter() {
    stats.volonte = Math.min(100, stats.volonte + 10);
    updateStats();
  }

  function marcher() {
    stats.volonte = Math.max(0, stats.volonte - 10);
    stats.physique = Math.min(100, stats.physique + 5);
    updateStats();
  }

  function ecrire() {
    stats.volonte = Math.max(0, stats.volonte - 5);
    stats.psychique = Math.max(0, stats.psychique - 5);
    updateStats();
    setTimeout(() => {
      stats.psychique = Math.min(100, stats.psychique + 10);
      updateStats();
    }, 5000); // effet différé après 5 secondes
  }

  function dormir() {
    stats.volonte = Math.min(100, stats.volonte + 20);
    stats.psychique = Math.min(100, stats.psychique + 20);
    stats.physique = Math.min(100, stats.physique + 20);
    updateStats();
  }
</script>

  <script>
    function getDecimalTime() {
      const now = new Date();
      const msToday = now - new Date(now.getFullYear(), now.getMonth(), now.getDate());
      const decimalDay = (msToday / (24 * 60 * 60 * 1000)) * 100000;
      const h = Math.floor(decimalDay / 10000);
      const m = Math.floor((decimalDay % 10000) / 100);
      const s = Math.floor(decimalDay % 100);
      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    }

    const months = [
      "Vendémiaire", "Brumaire", "Frimaire", "Nivôse", "Pluviôse", "Ventôse",
      "Germinal", "Floréal", "Prairial", "Messidor", "Thermidor", "Fructidor"
    ];
    const joursCompl = [
      "Fête de la Vertu", "Fête du Génie", "Fête du Travail",
      "Fête de l’Opinion", "Fête des Récompenses", "Fête de la Révolution"
    ];
    const décade = [
      "Primidi", "Duodi", "Tridi", "Quartidi", "Quintidi",
      "Sextidi", "Septidi", "Octidi", "Nonidi", "Décadi"
    ];

    function getRepublicanDate() {
      const start = new Date(Date.UTC(1792, 8, 22));
      const today = new Date();
      const daysDiff = Math.floor((today - start) / (1000 * 60 * 60 * 24));
      const an = Math.floor(daysDiff / 365.2425) + 1;
      const daysOfYear = Math.floor(daysDiff % 365.2425);

      if (daysOfYear >= 360) {
        return `${joursCompl[daysOfYear - 360] || 'Jour complémentaire'} - An ${an}`;
      }

      const mois = Math.floor(daysOfYear / 30);
      const jour = daysOfYear % 30;
      return `${décade[jour % 10]} ${jour + 1} ${months[mois]} - An ${an}`;
    }

    function updateClock() {
      document.getElementById("decimalClock").textContent = getDecimalTime();
      document.getElementById("republicanDate").textContent = getRepublicanDate();
    }

    setInterval(updateClock, 1000);
    updateClock();

    // Stats
    let stats = {
      psychique: 80,
      physique: 70,
      volonte: 100
    };

    function updateStats() {
      document.getElementById("psychiqueStat").textContent = stats.psychique;
      document.getElementById("physiqueStat").textContent = stats.physique;
      document.getElementById("volonteStat").textContent = stats.volonte;
    }

    function faireAction() {
      stats.volonte = Math.max(0, stats.volonte - 10);
      updateStats();
    }

    updateStats();
  </script>
</body>
</html>
